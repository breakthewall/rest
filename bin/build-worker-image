#!/bin/bash

app=$1
branch=$2

image=rest/${app}_${branch}

source bin/_functions.sh

print "Building $app image"
IMAGE_NAME=$image \
  docker-compose \
    -f tools/${app}_${branch}/docker/docker-compose.yml \
    build


print "Building rest/$app image"
COMPOSE_PROJECT_NAME=${app}_${branch} \
BASE_IMAGE=$image \
REDIS="" \
NETWORK=$app \
  docker-compose \
    -f docker-compose-worker.yml \
    build worker
